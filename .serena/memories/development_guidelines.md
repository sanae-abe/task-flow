# 開発ガイドライン

## 設計原則

### セキュリティファースト
- XSS対策: DOMPurifyでサニタイズ
- CSP対応: インラインスクリプト回避
- 型安全性: TypeScript strict mode
- 入力検証: 全フォーム入力の検証

### アクセシビリティ
- WCAG準拠のUI設計
- キーボードナビゲーション対応
- スクリーンリーダー対応
- 適切なARIA属性使用

### パフォーマンス
- 遅延ローディング対応
- メモ化戦略（React.memo, useMemo, useCallback）
- バンドルサイズ最適化
- 画像最適化

## コンポーネント設計パターン

### 共通コンポーネント再利用
- `src/components/shared/` 内の統合コンポーネント活用
- UnifiedDialog, UnifiedForm, UnifiedMenu の優先使用
- 一貫性のあるUI/UX実現

### Hooks使用パターン
- ビジネスロジックのカスタムフック分離
- useCallback/useMemoによる再レンダリング最適化
- Context使用時の適切な依存関係管理

### 状態管理パターン
- 複雑な状態はuseReducer使用
- Context分割による再レンダリング最適化
- ローカル状態とグローバル状態の適切な使い分け

## ファイル添付・セキュリティ

### ファイル制限
- 最大サイズ: 5MB
- 許可形式: 画像・テキスト・一般ドキュメント
- Base64エンコードでブラウザ内保存

### セキュリティ対策
- ファイル内容のサニタイズ
- XSS攻撃防止
- CSRFトークン不要（SPA）

## データ永続化

### ローカルストレージ戦略
- タスク、ボード、ラベルのローカル保存
- JSONシリアライゼーション
- バックアップ・リストア機能

### データ移行・互換性
- スキーマバージョニング
- 下位互換性維持
- データ検証・修復機能

## テストガイドライン

### テスト対象
- コンポーネント単体テスト
- カスタムフック単体テスト
- ユーザーインタラクションテスト
- エラーハンドリングテスト

### カバレッジ目標
- 全体: 80%以上維持
- 重要ビジネスロジック: 90%以上
- エラーハンドリング: 100%

## デプロイメント考慮事項

### S3静的ホスティング対応
- HashRouter使用
- 相対パス設定
- Service Worker無効化
- 404フォールバック対応

### パフォーマンス最適化
- Gzip圧縮有効
- 画像最適化
- バンドル分割
- CDN活用検討