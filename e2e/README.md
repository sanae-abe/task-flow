# E2E Testing Quick Start

TaskFlowã®E2Eãƒ†ã‚¹ãƒˆã‚’ã™ãã«å§‹ã‚ã‚‹ãŸã‚ã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆåˆå›ã®ã¿ï¼‰

```bash
# Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install

# ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜é–¢ä¿‚ã‚‚å«ã‚ã‚‹å ´åˆï¼ˆLinuxï¼‰
npx playwright install --with-deps
```

## ğŸ“ åŸºæœ¬çš„ãªä½¿ã„æ–¹

### 1. UIãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰

æœ€ã‚‚ä½¿ã„ã‚„ã™ã„æ–¹æ³•ã§ã™ã€‚ãƒ†ã‚¹ãƒˆã®å®Ÿè¡ŒçŠ¶æ³ã‚’å¯è¦–åŒ–ã—ãªãŒã‚‰é–‹ç™ºã§ãã¾ã™ã€‚

```bash
npm run test:e2e:ui
```

**æ©Ÿèƒ½:**
- ãƒ†ã‚¹ãƒˆã®å®Ÿè¡ŒçŠ¶æ³ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèª
- ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§ã®ãƒ‡ãƒãƒƒã‚°
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ»ãƒ“ãƒ‡ã‚ªã®ç¢ºèª
- ãƒ†ã‚¹ãƒˆã®é¸æŠå®Ÿè¡Œ

### 2. ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ

CI/CDã¨åŒã˜ç’°å¢ƒã§å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
npm run test:e2e
```

### 3. ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è¡¨ç¤ºã—ã¦å®Ÿè¡Œ

å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ†ã‚¹ãƒˆã®å‹•ãã‚’ç¢ºèªã§ãã¾ã™ã€‚

```bash
npm run test:e2e:headed
```

## ğŸ” ãƒ†ã‚¹ãƒˆã®ä½œæˆ

### ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆ

ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®æ“ä½œã‚’è¨˜éŒ²ã—ã¦ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

```bash
npm run test:e2e:codegen
```

1. ãƒ–ãƒ©ã‚¦ã‚¶ãŒèµ·å‹•ã—ã¾ã™
2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ“ä½œã—ã¾ã™
3. PlaywrightãŒè‡ªå‹•çš„ã«ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™
4. ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«è²¼ã‚Šä»˜ã‘ã¾ã™

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

```
e2e/
â””â”€â”€ tests/
    â”œâ”€â”€ your-feature.spec.ts  # ã“ã“ã«æ–°ã—ã„ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
    â””â”€â”€ ...
```

### åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆã®ä¾‹

```typescript
import { test, expect } from '../fixtures/test-fixtures';
import { createTask } from '../helpers/test-helpers';

test.describe('Your Feature', () => {
  test.beforeEach(async ({ page, cleanState }) => {
    await page.goto('/');
  });

  test('should do something', async ({ page }) => {
    // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«è¨˜è¿°
    await createTask(page, { title: 'Test Task' });

    await expect(page.getByText('Test Task')).toBeVisible();
  });
});
```

## ğŸ› ãƒ‡ãƒãƒƒã‚°

### ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ

```bash
npm run test:e2e:debug
```

- ãƒ‡ãƒãƒƒã‚¬ãŒèµ·å‹•ã—ã¾ã™
- `await page.pause()` ã§ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã§ãã¾ã™
- Playwright Inspectorã§æ“ä½œã‚’ç¢ºèªã§ãã¾ã™

### ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ

```typescript
// ãƒ†ã‚¹ãƒˆã« .only ã‚’è¿½åŠ 
test.only('should test specific feature', async ({ page }) => {
  // ...
});
```

## ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º

ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€HTMLãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚

```bash
npm run test:e2e:report
```

## ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶åˆ¥å®Ÿè¡Œ

### ç‰¹å®šã®ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿

```bash
npm run test:e2e:chromium  # Chromium
npm run test:e2e:firefox   # Firefox
npm run test:e2e:webkit    # Safari (WebKit)
```

### ãƒ¢ãƒã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶

```bash
npm run test:e2e:mobile
```

## ğŸš€ PWAãƒ†ã‚¹ãƒˆ

### PWAãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
# PWAãƒ†ã‚¹ãƒˆï¼ˆåŸºæœ¬ + åŒ…æ‹¬ï¼‰
npm run test:e2e:pwa

# åŸºæœ¬ãƒ†ã‚¹ãƒˆã®ã¿ï¼ˆé«˜é€Ÿï¼‰
npm run test:e2e:pwa:basic

# å…¨ãƒ–ãƒ©ã‚¦ã‚¶ã§PWAãƒ†ã‚¹ãƒˆ
npm run test:e2e:pwa:all

# UIãƒ¢ãƒ¼ãƒ‰ã§PWAãƒ†ã‚¹ãƒˆ
npm run test:e2e:pwa:ui

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§PWAãƒ†ã‚¹ãƒˆ
npm run test:e2e:pwa:debug
```

### PWAãƒ†ã‚¹ãƒˆã®å¯¾è±¡æ©Ÿèƒ½

- Service Workerç™»éŒ²ã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- PWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- Service Workeræ›´æ–°é€šçŸ¥
- PWAãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆæ¤œè¨¼

è©³ç´°ã¯ [PWAãƒ†ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](tests/PWA_TEST_README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## âœ… ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®æ´»ç”¨

ãƒ†ã‚¹ãƒˆã‚’ç°¡æ½”ã«æ›¸ããŸã‚ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

```typescript
import {
  createTask,
  editTask,
  deleteTask,
  completeTask,
  createLabel,
  addSubtask,
} from '../helpers/test-helpers';

// ã‚¿ã‚¹ã‚¯ä½œæˆ
await createTask(page, {
  title: 'Task Title',
  description: 'Task description',
  priority: 'High'
});

// ãƒ©ãƒ™ãƒ«ä½œæˆ
await createLabel(page, 'Label Name', '#FF0000');

// ã‚µãƒ–ã‚¿ã‚¹ã‚¯è¿½åŠ 
await addSubtask(page, 'Task Title', 'Subtask Title');
```

åˆ©ç”¨å¯èƒ½ãªãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®ä¸€è¦§ã¯ `e2e/helpers/test-helpers.ts` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“– è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã‚ˆã‚Šè©³ã—ã„æƒ…å ±ã¯ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

- [å®Œå…¨ãªE2Eãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](../docs/E2E_TESTING.md)
- [Playwrightå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://playwright.dev/)

## ğŸ’¡ Tips

### ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ãŸã‚‰

1. **UIãƒ¢ãƒ¼ãƒ‰ã§ç¢ºèª**: `npm run test:e2e:ui` ã§ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã«ç¢ºèª
2. **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç¢ºèª**: `test-results/` ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç¢ºèª
3. **ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰**: `npm run test:e2e:debug` ã§è©³ç´°èª¿æŸ»

### ãƒ†ã‚¹ãƒˆã‚’é€Ÿãã™ã‚‹ã«ã¯

1. **ç‰¹å®šã®ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿å®Ÿè¡Œ**: `npm run test:e2e:chromium`
2. **ä¸¦åˆ—å®Ÿè¡Œ**: `playwright.config.ts` ã® `workers` è¨­å®šã‚’èª¿æ•´
3. **ä¸è¦ãªãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—**: `test.skip()` ã‚’æ´»ç”¨

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

- âœ… ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’æ´»ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆã‚’ç°¡æ½”ã«
- âœ… `data-testid` ã‚ˆã‚Šã‚‚ `getByRole`, `getByLabel` ã‚’å„ªå…ˆ
- âœ… å„ãƒ†ã‚¹ãƒˆã‚’ç‹¬ç«‹ã•ã›ã‚‹ï¼ˆ`cleanState` ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’æ´»ç”¨ï¼‰
- âœ… æ˜ç¢ºãªãƒ†ã‚¹ãƒˆåã‚’ã¤ã‘ã‚‹
- âŒ å›ºå®šæ™‚é–“ã®å¾…æ©Ÿï¼ˆ`waitForTimeout`ï¼‰ã¯é¿ã‘ã‚‹
- âŒ CSSã‚»ãƒ¬ã‚¯ã‚¿ã«ä¾å­˜ã—ã™ããªã„
